# 房产中介房源信息管理系统设计方案

## 第一步：概念模型设计

### 核心实体及关系

1. **楼盘（Property）**
   - 包含基本信息：名称、地址、开发商、物业类型等
   - 关系：1 个楼盘包含多个楼栋（1:N）
2. **楼栋（Building）**
   - 包含基本信息：楼栋编号、总层数等
   - 关系：属于 1 个楼盘（N:1），包含多个房源（1:N）
3. **房源（House）**
   - 包含基本信息：门牌号、户型、面积、价格、状态等
   - 关系：属于 1 个楼栋（N:1），关联多个房东（N:M），由 1 个经纪人负责（N:1），有多个带看记录（1:N）和状态变更记录（1:N）
4. **房东（Landlord）**
   - 包含基本信息：姓名、联系方式、身份证号等
   - 关系：拥有多个房源（1:M）
5. **客户（Customer）**
   - 包含基本信息：姓名、联系方式、需求等
   - 关系：有多个带看记录（1:N）
6. **经纪人（Agent）**
   - 包含基本信息：姓名、工号、所属门店等
   - 关系：负责多个房源（1:N），创建多个带看记录（1:N）
7. **带看记录（VisitRecord）**
   - 包含基本信息：带看时间、反馈等
   - 关系：关联 1 个房源、1 个客户和 1 个经纪人（均为 N:1）
8. **房源状态变更记录（HouseStatusLog）**
   - 包含基本信息：变更时间、前后状态、原因等
   - 关系：关联 1 个房源（N:1）

### ER 关系图（文字描述）

```plaintext
Property 1───┐
             │
             N
Building 1───┼───┐
             │   │
             N   │
House 1──────┼───┼───┐
             │   │   │
             N   N   N
Landlord     VisitRecord     HouseStatusLog
                   │
                   │
         ┌────────┴────────┐
         N                 N
    Customer           Agent
```

## 第二步：数据库物理设计

### MySQL 建表语句

```sql
-- 楼盘信息表
CREATE TABLE `property` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '楼盘ID',
  `name` varchar(255) NOT NULL COMMENT '楼盘名称',
  `address` varchar(512) NOT NULL COMMENT '楼盘地址',
  `developer` varchar(255) DEFAULT NULL COMMENT '开发商',
  `property_type` varchar(50) NOT NULL COMMENT '物业类型：住宅、商业、别墅等',
  `completion_year` int(4) DEFAULT NULL COMMENT '建成年代',
  `property_company` varchar(255) DEFAULT NULL COMMENT '物业公司',
  `property_fee` decimal(10,2) DEFAULT NULL COMMENT '物业费',
  `description` text DEFAULT NULL COMMENT '楼盘描述',
  `longitude` decimal(10,6) DEFAULT NULL COMMENT '经度',
  `latitude` decimal(10,6) DEFAULT NULL COMMENT '纬度',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `created_by` bigint(20) NOT NULL COMMENT '创建人ID',
  `updated_by` bigint(20) NOT NULL COMMENT '更新人ID',
  PRIMARY KEY (`id`),
  KEY `idx_property_name` (`name`),
  KEY `idx_property_address` (`address`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='楼盘信息表';

-- 楼栋信息表
CREATE TABLE `building` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '楼栋ID',
  `property_id` bigint(20) NOT NULL COMMENT '所属楼盘ID',
  `name` varchar(100) NOT NULL COMMENT '楼栋名称/编号',
  `total_floor` int(4) DEFAULT NULL COMMENT '总层数',
  `unit_count` int(4) DEFAULT NULL COMMENT '单元数',
  `description` text DEFAULT NULL COMMENT '楼栋描述',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `created_by` bigint(20) NOT NULL COMMENT '创建人ID',
  `updated_by` bigint(20) NOT NULL COMMENT '更新人ID',
  PRIMARY KEY (`id`),
  KEY `idx_building_property_id` (`property_id`),
  KEY `idx_building_name` (`name`),
  CONSTRAINT `fk_building_property` FOREIGN KEY (`property_id`) REFERENCES `property` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='楼栋信息表';

-- 房源信息表
CREATE TABLE `house` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '房源ID',
  `building_id` bigint(20) NOT NULL COMMENT '所属楼栋ID',
  `house_number` varchar(50) NOT NULL COMMENT '门牌号',
  `layout` varchar(50) NOT NULL COMMENT '户型：如3室2厅1卫',
  `area` decimal(10,2) NOT NULL COMMENT '建筑面积(平方米)',
  `inner_area` decimal(10,2) DEFAULT NULL COMMENT '套内面积(平方米)',
  `floor` int(4) NOT NULL COMMENT '所在楼层',
  `total_floor` int(4) DEFAULT NULL COMMENT '总楼层',
  `orientation` varchar(50) DEFAULT NULL COMMENT '朝向',
  `decoration` varchar(50) DEFAULT NULL COMMENT '装修情况：毛坯、简装、精装等',
  `house_type` tinyint(1) NOT NULL COMMENT '房源类型：1-出售,2-出租',
  `price` decimal(15,2) NOT NULL COMMENT '价格：售价(万元)或租金(元/月)',
  `status` tinyint(2) NOT NULL COMMENT '房源状态：1-待售/待租,2-已预订,3-已成交,4-已下架',
  `owner_price` decimal(15,2) DEFAULT NULL COMMENT '业主底价',
  `description` text DEFAULT NULL COMMENT '房源描述',
  `agent_id` bigint(20) NOT NULL COMMENT '负责经纪人ID',
  `is_valid` tinyint(1) NOT NULL DEFAULT 1 COMMENT '是否有效：1-有效,0-无效',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `created_by` bigint(20) NOT NULL COMMENT '创建人ID',
  `updated_by` bigint(20) NOT NULL COMMENT '更新人ID',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_house_building_housenumber` (`building_id`,`house_number`) COMMENT '确保同一楼栋下门牌号唯一',
  KEY `idx_house_status` (`status`),
  KEY `idx_house_price` (`price`),
  KEY `idx_house_area` (`area`),
  KEY `idx_house_agent_id` (`agent_id`),
  KEY `idx_house_house_type` (`house_type`),
  CONSTRAINT `fk_house_building` FOREIGN KEY (`building_id`) REFERENCES `building` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk_house_agent` FOREIGN KEY (`agent_id`) REFERENCES `agent` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='房源信息表';

-- 房东信息表
CREATE TABLE `landlord` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '房东ID',
  `name` varchar(50) NOT NULL COMMENT '姓名',
  `phone` varchar(20) NOT NULL COMMENT '联系电话',
  `id_card` varchar(20) DEFAULT NULL COMMENT '身份证号',
  `gender` tinyint(1) DEFAULT NULL COMMENT '性别：1-男,2-女',
  `address` varchar(512) DEFAULT NULL COMMENT '联系地址',
  `remark` text DEFAULT NULL COMMENT '备注信息',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `created_by` bigint(20) NOT NULL COMMENT '创建人ID',
  `updated_by` bigint(20) NOT NULL COMMENT '更新人ID',
  PRIMARY KEY (`id`),
  KEY `idx_landlord_phone` (`phone`),
  KEY `idx_landlord_name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='房东信息表';

-- 房源-房东关联表（处理多对多关系）
CREATE TABLE `house_landlord` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `house_id` bigint(20) NOT NULL COMMENT '房源ID',
  `landlord_id` bigint(20) NOT NULL COMMENT '房东ID',
  `is_main` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否主要房东：1-是,0-否',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `created_by` bigint(20) NOT NULL COMMENT '创建人ID',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_house_landlord` (`house_id`,`landlord_id`),
  KEY `idx_house_landlord_landlord_id` (`landlord_id`),
  CONSTRAINT `fk_house_landlord_house` FOREIGN KEY (`house_id`) REFERENCES `house` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk_house_landlord_landlord` FOREIGN KEY (`landlord_id`) REFERENCES `landlord` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='房源-房东关联表';

-- 客户信息表
CREATE TABLE `customer` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '客户ID',
  `name` varchar(50) NOT NULL COMMENT '姓名',
  `phone` varchar(20) NOT NULL COMMENT '联系电话',
  `gender` tinyint(1) DEFAULT NULL COMMENT '性别：1-男,2-女',
  `demand` text DEFAULT NULL COMMENT '购房/租房需求描述',
  `source` varchar(50) DEFAULT NULL COMMENT '客户来源',
  `status` tinyint(2) DEFAULT 1 COMMENT '客户状态：1-活跃,2-已成交,3-休眠',
  `remark` text DEFAULT NULL COMMENT '备注信息',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `created_by` bigint(20) NOT NULL COMMENT '创建人ID',
  `updated_by` bigint(20) NOT NULL COMMENT '更新人ID',
  PRIMARY KEY (`id`),
  KEY `idx_customer_phone` (`phone`),
  KEY `idx_customer_name` (`name`),
  KEY `idx_customer_status` (`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='客户信息表';

-- 经纪人信息表
CREATE TABLE `agent` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '经纪人ID',
  `name` varchar(50) NOT NULL COMMENT '姓名',
  `employee_id` varchar(20) NOT NULL COMMENT '工号',
  `phone` varchar(20) NOT NULL COMMENT '联系电话',
  `store_id` bigint(20) DEFAULT NULL COMMENT '所属门店ID',
  `position` varchar(50) DEFAULT NULL COMMENT '职位',
  `status` tinyint(1) NOT NULL DEFAULT 1 COMMENT '状态：1-在职,0-离职',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_agent_employee_id` (`employee_id`),
  KEY `idx_agent_phone` (`phone`),
  KEY `idx_agent_name` (`name`),
  KEY `idx_agent_store_id` (`store_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='经纪人信息表';

-- 带看记录表
CREATE TABLE `visit_record` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '带看记录ID',
  `house_id` bigint(20) NOT NULL COMMENT '房源ID',
  `customer_id` bigint(20) NOT NULL COMMENT '客户ID',
  `agent_id` bigint(20) NOT NULL COMMENT '经纪人ID',
  `visit_time` datetime NOT NULL COMMENT '带看时间',
  `feedback` text DEFAULT NULL COMMENT '客户反馈',
  `next_plan` text DEFAULT NULL COMMENT '下一步计划',
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  `created_by` bigint(20) NOT NULL COMMENT '创建人ID',
  `updated_by` bigint(20) NOT NULL COMMENT '更新人ID',
  PRIMARY KEY (`id`),
  KEY `idx_visit_record_house_id` (`house_id`),
  KEY `idx_visit_record_customer_id` (`customer_id`),
  KEY `idx_visit_record_agent_id` (`agent_id`),
  KEY `idx_visit_record_visit_time` (`visit_time`),
  CONSTRAINT `fk_visit_record_house` FOREIGN KEY (`house_id`) REFERENCES `house` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk_visit_record_customer` FOREIGN KEY (`customer_id`) REFERENCES `customer` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk_visit_record_agent` FOREIGN KEY (`agent_id`) REFERENCES `agent` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='带看记录表';

-- 房源状态变更记录表
CREATE TABLE `house_status_log` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `house_id` bigint(20) NOT NULL COMMENT '房源ID',
  `old_status` tinyint(2) NOT NULL COMMENT '变更前状态',
  `new_status` tinyint(2) NOT NULL COMMENT '变更后状态',
  `reason` varchar(512) DEFAULT NULL COMMENT '变更原因',
  `operated_by` bigint(20) NOT NULL COMMENT '操作人ID',
  `operated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '操作时间',
  PRIMARY KEY (`id`),
  KEY `idx_house_status_log_house_id` (`house_id`),
  KEY `idx_house_status_log_operated_at` (`operated_at`),
  CONSTRAINT `fk_house_status_log_house` FOREIGN KEY (`house_id`) REFERENCES `house` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='房源状态变更记录表';
```

### 核心表设计说明

1. **楼盘表（property）与楼栋表（building）**
   - 采用分级设计，楼盘包含多个楼栋，通过`property_id`外键关联
   - 这种设计符合第三范式，避免数据冗余，便于统一管理同一楼盘的共性信息
2. **房源表（house）设计**
   - 通过`building_id`与楼栋表关联，形成 "楼盘 - 楼栋 - 房源" 三级结构
   - 设计`uk_house_building_housenumber`唯一索引确保同一楼栋下门牌号不重复，保证数据唯一性
   - 区分`house_type`（出售 / 出租）以便不同业务流程处理
   - `status`字段记录房源生命周期状态，配合状态变更记录表实现完整的状态追踪
3. **房源与房东的多对多关系**
   - 通过中间表`house_landlord`实现，支持一个房源有多个房东的业务场景
   - 增加`is_main`字段标识主要联系人，满足实际业务需求

### 索引策略说明

1. **主键索引**：所有表都以`id`作为自增主键，确保记录唯一性和高效查询
2. **外键索引**：所有外键字段（如`property_id`、`building_id`等）都建立索引，显著提升关联查询性能
3. **业务查询索引**：
   - 房源表中对`status`、`price`、`area`、`house_type`等建立索引，这些是房源搜索的核心条件
   - 对经常用于筛选、排序的字段建立索引，如带看记录的`visit_time`
   - 对常用查询条件如姓名、电话建立索引，加快检索速度
4. **唯一索引**：
   - 对`building_id`和`house_number`建立联合唯一索引，确保房源物理唯一性
   - 对经纪人`employee_id`建立唯一索引，确保工号不重复
5. **索引设计考量**：
   - 平衡查询性能和写入性能，避免过度索引
   - 针对 10 万 + 级数据量，通过合理索引设计将查询响应时间控制在毫秒级
   - 为未来可能的扩展预留索引优化空间

## 第三步：核心业务流程与 API 设计

### 1. 新增房源的后端逻辑流程

```plaintext
接收房源信息请求 → 数据验证 → 业务规则验证 → 开启事务 →
  插入房源记录 → 处理房东关联 → 记录状态变更 → 提交事务 → 返回结果
```

**详细步骤**：

1. **接收请求**：接收包含房源基本信息、所属楼栋 ID、房东信息、负责经纪人 ID 等数据的请求

2. **数据验证**：

   ```java
   // 伪代码
   validateHouseData(houseDTO) {
     // 验证必填字段
     if (isEmpty(houseDTO.getBuildingId()) || isEmpty(houseDTO.getHouseNumber())) {
       throw new ValidationException("楼栋和门牌号为必填项");
     }
     
     // 验证数据格式
     if (houseDTO.getArea() <= 0 || houseDTO.getPrice() <= 0) {
       throw new ValidationException("面积和价格必须为正数");
     }
     
     // 验证楼栋是否存在
     if (!buildingService.exists(houseDTO.getBuildingId())) {
       throw new BusinessException("所属楼栋不存在");
     }
     
     // 验证门牌号是否已存在
     if (houseService.existsByBuildingIdAndHouseNumber(houseDTO.getBuildingId(), houseDTO.getHouseNumber())) {
       throw new BusinessException("该门牌号的房源已存在");
     }
   }
   ```

   

3. **业务规则验证**：

   - 验证经纪人是否有权限添加房源
   - 检查价格是否在合理范围（可选）

4. **数据库事务处理**：

   ```java
   // 伪代码
   @Transactional
   public HouseVO addHouse(HouseDTO houseDTO, Long operatorId) {
     // 1. 保存房源主信息
     House house = convertToEntity(houseDTO);
     house.setCreatedBy(operatorId);
     house.setUpdatedBy(operatorId);
     house.setStatus(1); // 初始状态：待售/待租
     Long houseId = houseMapper.insert(house);
     
     // 2. 处理房东关联
     List<LandlordRelationDTO> landlords = houseDTO.getLandlords();
     if (CollectionUtils.isNotEmpty(landlords)) {
       for (LandlordRelationDTO landlord : landlords) {
         // 若房东ID不存在，先创建房东
         if (landlord.getLandlordId() == null) {
           Landlord newLandlord = createLandlord(landlord);
           landlord.setLandlordId(newLandlord.getId());
         }
         // 建立房源-房东关联
         houseLandlordMapper.insert(new HouseLandlord(houseId, landlord.getLandlordId(), landlord.getIsMain(), operatorId));
       }
     }
     
     // 3. 记录初始状态日志
     houseStatusLogMapper.insert(new HouseStatusLog(houseId, 0, 1, "新建房源", operatorId));
     
     // 4. 返回结果
     return convertToVO(houseMapper.selectById(houseId));
   }
   ```

   

5. **返回结果**：返回新增房源的完整信息，包括 ID 等系统生成的字段

### 2. 多条件搜索房源 API 设计

#### 请求参数

```json
{
  "pageNum": 1,
  "pageSize": 20,
  "sortField": "price",
  "sortOrder": "asc",
  "propertyId": 123,           // 楼盘ID
  "buildingId": 456,           // 楼栋ID
  "houseType": 1,              // 房源类型：1-出售,2-出租
  "status": 1,                 // 房源状态
  "minPrice": 100,             // 最低价格
  "maxPrice": 500,             // 最高价格
  "minArea": 80,               // 最小面积
  "maxArea": 150,              // 最大面积
  "layout": "3室2厅",          // 户型
  "floorRange": "middle",      // 楼层范围：low-低, middle-中, high-高
  "orientation": "南北通透",   // 朝向
  "decoration": "精装",        // 装修情况
  "agentId": 789               // 经纪人ID
}
```

#### 响应格式

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 156,              // 总记录数
    "list": [
      {
        "id": 1001,
        "houseNumber": "1单元101室",
        "layout": "3室2厅1卫",
        "area": 120.50,
        "floor": 10,
        "totalFloor": 30,
        "orientation": "南北通透",
        "decoration": "精装",
        "houseType": 1,
        "price": 350.00,
        "status": 1,
        "propertyName": "阳光花园",
        "buildingName": "1号楼",
        "agentName": "张三",
        "createdAt": "2023-05-15 10:30:00"
      }
      // 更多房源...
    ],
    "pageNum": 1,
    "pageSize": 20,
    "pages": 8                  // 总页数
  }
}
```

#### 数据库查询构建逻辑

使用动态 SQL 构建查询条件，MyBatis 示例：

```xml
<select id="searchHouses" parameterType="HouseSearchDTO" resultType="HouseVO">
  SELECT 
    h.id, h.house_number, h.layout, h.area, h.floor, h.total_floor,
    h.orientation, h.decoration, h.house_type, h.price, h.status,
    p.name as property_name, b.name as building_name,
    a.name as agent_name, h.created_at
  FROM house h
  JOIN building b ON h.building_id = b.id
  JOIN property p ON b.property_id = p.id
  JOIN agent a ON h.agent_id = a.id
  WHERE h.is_valid = 1
  <if test="propertyId != null">AND b.property_id = #{propertyId}</if>
  <if test="buildingId != null">AND h.building_id = #{buildingId}</if>
  <if test="houseType != null">AND h.house_type = #{houseType}</if>
  <if test="status != null">AND h.status = #{status}</if>
  <if test="minPrice != null">AND h.price >= #{minPrice}</if>
  <if test="maxPrice != null">AND h.price <= #{maxPrice}</if>
  <if test="minArea != null">AND h.area >= #{minArea}</if>
  <if test="maxArea != null">AND h.area <= #{maxArea}</if>
  <if test="layout != null">AND h.layout LIKE CONCAT('%', #{layout}, '%')</if>
  <if test="floorRange == 'low'">AND h.floor <= h.total_floor * 0.33</if>
  <if test="floorRange == 'middle'">AND h.floor > h.total_floor * 0.33 AND h.floor <= h.total_floor * 0.66</if>
  <if test="floorRange == 'high'">AND h.floor > h.total_floor * 0.66</if>
  <if test="orientation != null">AND h.orientation LIKE CONCAT('%', #{orientation}, '%')</if>
  <if test="decoration != null">AND h.decoration = #{decoration}</if>
  <if test="agentId != null">AND h.agent_id = #{agentId}</if>
  
  <if test="sortField != null and sortOrder != null">
    ORDER BY ${sortField} ${sortOrder}
  </if>
  
  LIMIT #{(pageNum-1)*pageSize}, #{pageSize}
</select>
```

#### 性能优化策略

1. **分页查询**：使用 LIMIT 实现分页，避免一次性加载大量数据
2. **动态 SQL**：只拼接非空条件，减少不必要的过滤
3. **索引利用**：查询条件都基于已建立的索引字段
4. **结果缓存**：对热门查询条件结果进行缓存（如 Redis）
5. 查询优化：
   - 只查询需要的字段，避免 SELECT *
   - 合理使用 JOIN，避免不必要的表关联
   - 对于复杂统计查询，考虑使用读写分离

## 系统核心架构设计

### 核心模块划分

1. **用户认证与权限模块**
   - 经纪人登录认证
   - 操作权限控制
   - 会话管理
2. **楼盘管理模块**
   - 楼盘信息 CRUD
   - 楼栋信息管理
   - 楼盘基础数据统计
3. **房源管理模块**
   - 房源信息 CRUD
   - 房源状态管理
   - 房源价格调整
   - 房源图片管理（预留扩展）
4. **客户管理模块**
   - 客户信息管理
   - 客户需求管理
   - 客户跟进记录
5. **房东管理模块**
   - 房东信息管理
   - 房东房源关联
6. **带看管理模块**
   - 带看记录创建与查询
   - 带看统计分析
7. **搜索模块**
   - 房源多条件搜索
   - 搜索结果排序与分页
   - 搜索历史记录
8. **统计分析模块**
   - 房源数据统计
   - 经纪人业绩分析
   - 房源成交趋势分析

这种模块化设计保证了系统的可扩展性，未来可以方便地添加新功能如工作流审批、移动端支持等。每个模块通过清晰的接口交互，降低了系统耦合度，便于团队协作开发和后期维护。