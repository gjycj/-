<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="COM.House.Deed.Pavilion.Mapper.AgentBackupMapper">

    <!-- 通用结果集映射 -->
    <resultMap id="BaseResultMap" type="COM.House.Deed.Pavilion.Entity.AgentBackup">
        <id column="id" property="id"/>
        <result column="original_id" property="originalId"/>
        <result column="name" property="name"/>
        <result column="employee_id" property="employeeId"/>
        <result column="phone" property="phone"/>
        <result column="store_id" property="storeId"/>
        <result column="position" property="position"/>
        <result column="status" property="status"/>
        <result column="created_at" property="createdAt"/>
        <result column="updated_at" property="updatedAt"/>
        <result column="backup_time" property="backupTime"/>
        <result column="delete_reason" property="deleteReason"/>
        <result column="deleted_by" property="deletedBy"/>
    </resultMap>

    <!-- 新增备份记录 -->
    <insert id="insert" parameterType="COM.House.Deed.Pavilion.Entity.AgentBackup" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO agent_backup (
        original_id,
        name,
        employee_id,
        phone,
        store_id,
        position,
        status,
        created_at,
        updated_at,
        backup_time,
        delete_reason,
        deleted_by,
        created_by,
        updated_by
        ) VALUES (
        #{originalId},
        #{name},
        #{employeeId},
        #{phone},
        #{storeId},
        #{position},
        #{status},
        #{createdAt},
        #{updatedAt},
        #{backupTime},
        #{deleteReason},
        #{deletedBy},
        #{createdBy},
        #{updatedBy}
        )
    </insert>

    <!-- 根据备份ID删除备份 -->
    <delete id="deleteById" parameterType="java.lang.Long">
        DELETE FROM agent_backup WHERE id = #{id}
    </delete>

    <!-- 根据原经纪人ID查询备份 -->
    <select id="selectByOriginalId" parameterType="java.lang.Long" resultMap="BaseResultMap">
        SELECT * FROM agent_backup WHERE original_id = #{originalId}
    </select>

    <!-- 根据备份ID查询备份 -->
    <select id="selectById" parameterType="java.lang.Long" resultMap="BaseResultMap">
        SELECT * FROM agent_backup WHERE id = #{id}
    </select>

</mapper>